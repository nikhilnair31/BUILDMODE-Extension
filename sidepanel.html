<!-- sidepanel.html -->

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Related Images</title>
        <style>
            @font-face {
                font-family: "VenusCormier";
                src: url("assets/fonts/venus_cormier.otf") format("opentype");
                font-weight: normal;
                font-style: normal;
            }
            :root { 
                color-scheme: dark; 
                --base-0: #1e1c2c;
                --base-1: #221f31;
                --base-2: #7b7889;
                --accent-0: #deff96;
                --accent-0x: #ECFFCF;
                --accent-1: #A67BF2;
                --accent-1t: #337553B0;
            }
            body { 
                margin: 0; 
                font-family: "VenusCormier", system-ui, sans-serif;
                background: var(--base-0);
                color: white;
            }
            header { 
                position: sticky; 
                top: 0; 
                padding: 12px 14px; 
                display: flex;
                gap: 8px;
                z-index: 1; 
                background-color: var(--base-1);
                flex-direction: column;
            }
            #meta { 
                font-size: 12px; 
                color: var(--base-2); 
                margin-top: 4px; 
                word-break: break-word; 
            }
            .card { 
                border: 1px solid rgba(255,255,255,.1); 
                border-radius: 0;      /* <-- HARSH corners */
                overflow: hidden; 
            }
            .thumb { 
                width: 100%; 
                object-fit: cover; 
                display: block; 
                cursor: zoom-in;
            }
            .empty { 
                padding: 16px; 
                color: var(--base-2); 
                text-align: center; 
            }
            button.refresh { 
                padding: 8px 10px; 
                font-size: 13px; 
                cursor: pointer; 
                background: var(--accent-1t);
                border: none;
                border-radius: 0;   /* <-- HARSH corners */
                color: var(--accent-0x);
            }

            html { scrollbar-gutter: stable; }

            /* placeholder styling */
            .thumb[data-placeholder="1"] {
                filter: grayscale(0.1) contrast(0.95);
            }

            #app_title {
                font-size: x-large;
                color: var(--accent-0);
            }

            /* Masonry layout */
            #grid {
                column-width: 260px;
                column-gap: 12px;
                padding: 12px;
            }
            .card {
                display: inline-block;
                width: 100%;
                margin: 0 0 12px;
                border: 1px solid rgba(255,255,255,.12);
                border-radius: 0;   /* <-- HARSH corners */
                overflow: hidden;
                break-inside: avoid;
            }

            /* responsive */
            @media (max-width: 900px)  { #grid { column-width: 220px; } }
            @media (max-width: 600px)  { #grid { column-width: 180px; } }

            /* Lightbox */
            .overlay {
                position: fixed;
                inset: 0;
                background: var(--base-0);
                display: none;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            }
            .overlay.open { display: flex; }

            .lightbox {
                position: relative;
                max-width: 95vw;
                /* max-height: 90vh; */
                background: var(--base-1);
                border-radius: 0;   /* <-- HARSH corners */
                overflow: hidden;
            }
            .lightbox img.fullimg {
                display: block;
                max-width: 95vw;
                max-height: 90vh;
                width: auto;
                height: auto;
                object-fit: contain;
                background: var(--base-0);
            }
            .lightbox-btn {
                position: absolute;
                top: 8px;
                right: 8px;
                border: none;
                background: var(--base-0);
                color: var(--accent-0x);
                font: 600 14px system-ui, sans-serif;
                padding: 8px 10px;
                border-radius: 0;   /* <-- HARSH corners */
                cursor: pointer;
            }
            .lightbox-btn:focus-visible { 
                color: var(--accent-1);
            }
            #deleteBtn {
                right: 80px; 
                background: #a22; 
                color: #fff;
            }
            
            #linksBox {
                padding: 10px 14px;
                background: var(--base-1);
                display: flex;
                gap: 16px;
                flex-direction: row;
                flex-wrap: nowrap;
                justify-content: flex-start;
                align-items: center;
            }

            #linksBox a {
                display: block;
                color: var(--accent-0);
                font-weight: 500;
                margin: 4px 0;
                text-decoration: none;
                word-break: break-all;
            }

            #linksBox a:hover {
                color: var(--accent-1);
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
        <header>
            <div id="app_title"><strong>FORGOR</strong></div>
            <button id="refreshBtn" class="refresh" type="button" title="Refresh">Refresh</button>
            <button id="shotBtn" class="refresh" type="button" title="Save">Save</button>
            <div id="meta" aria-live="polite"></div>
        </header>
        <main id="grid"></main>
        <div id="overlay" class="overlay" aria-hidden="true">
            <div class="lightbox" role="dialog" aria-modal="true" aria-label="Image preview">
                <button class="lightbox-btn" id="closeBtn" type="button">CLOSE</button>
                <button class="lightbox-btn" id="deleteBtn" type="button">DELETE</button>
                <img class="fullimg" id="fullImg" alt="" />
                <div id="linksBox" class="links"></div>
            </div>
        </div>
        <script type="module" src="sidepanel.js"></script>
    </body>
</html>
